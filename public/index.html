<!DOCTYPE html>
<html>
<head>
<title>Ω</title>
<link rel="stylesheet" href="css/omega.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="js/jquery.tmpl.js"></script>
<script src="js/knockout-1.2.1.js"></script>
<script src="js/underscore-1.1.7.js"></script>
<script src="js/omega.js"></script>
</head>
<body>
<div id="header">
	<h1>Ω</h1><div id="loggedInUser" data-bind="text: user().name"></div>
</div>
<ul id="messages" data-bind="template: {name: 'messageItemTemplate', foreach: messages}">
</ul>
<form id="form" action="">
	<input id="input" type="text" name="text" placeholder="Type commands or just chat it up"/>
</form>
<ul id="issues" data-bind="template: {name: 'issueItemTemplate', foreach: issues}">
</ul>

<script type="text/x-jquery-tmpl" id="messageItemTemplate">
	<li>{{= user}} says: {{= msg}}</li>
</script>
<script type="text/x-jquery-tmpl" id="issueItemTemplate">
	<li data-bind="css: { closed: closed }">Ω{{= id}} <span class="assignee" data-bind="text: assignee() != 'nobody' ? '(@' + assignee() + ')' : ''"></span> {{= description}}</li>
</script>

<script type="text/javascript">
var socket = io.connect();

socket.on("connect", function () {
	console.log("socket connected");
});

var tracker;
$(function () {
	tracker = new OmegaIssueTracker.Tracker($("#input"), $("#form"), socket);
});
</script>
</body>
</html>