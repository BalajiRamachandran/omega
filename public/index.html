<!DOCTYPE html>
<html>
<head>
<title>Ω</title>
<style type="text/css">
	body {
		margin: 3em;
	}
	#messages {
		width: 100%;
		border: 1px solid grey;
		height: 20em;
		list-style-type: none;
		padding: 0.3em;
	}
	#issues {
		list-style-type: none;
		padding: 0.3em;
	}
	#form {
		width: 100%;
	}
	#input {
		width: 100%;
	}
	#header h1 {
		display: inline;
		margin: 0;
	}
	#loggedInUser {
		float: right;
		line-height: 3em;
	}
	.closed {
		background-color: grey;
	}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="js/jquery.tmpl.js"></script>
<script src="js/knockout-1.2.1.js"></script>
<script src="js/underscore-1.1.7.js"></script>
<script src="js/omega.js"></script>
</head>
<body>
<div id="header">
	<h1>Ω</h1><div id="loggedInUser" data-bind="text: user().name"></div>
</div>
<ul id="messages" data-bind="template: {name: 'messageItemTemplate', foreach: messages}">
</ul>
<form id="form" action="">
	<input id="input" type="text" name="text" placeholder="Type commands or just chat it up"/>
</form>
<ul id="issues" data-bind="template: {name: 'issueItemTemplate', foreach: issues}">
</ul>

<script type="text/x-jquery-tmpl" id="messageItemTemplate">
	<li>{{= user}} says: {{= msg}}</li>
</script>
<script type="text/x-jquery-tmpl" id="issueItemTemplate">
	<li data-bind="css: { closed: closed }">Ω{{= id}} {{= description}}</li>
</script>

<script type="text/javascript">
var socket = io.connect();

socket.on("connect", function () {
	console.log("socket connected");
});

var tracker;
$(function () {
	tracker = new OmegaIssueTracker.Tracker($("#input"), $("#form"), socket);
});
</script>
</body>
</html>